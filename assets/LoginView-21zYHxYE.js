import{u as p,r as n,c as _,a as o,w as i,v as c,b as f,d as h,e as g,f as v,o as w,g as C}from"./index-Ceh-zode.js";import{_ as x,a as b}from"./workImg-CTHQzf_B.js";import{a as k,s as l}from"./alert-D0yJvJzb.js";const T={id:"loginPage",class:"bg-yellow"},V={class:"conatiner loginPage vhContainer"},y=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:x,alt:""})]),o("img",{class:"d-m-n",src:b,alt:"workImg"})],-1),L={class:"formControls",action:"index.html"},B=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),E=o("label",{class:"formControls_label",for:"email"},"Email",-1),I=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),N="https://todolist-api.hexschool.io",D={__name:"LoginView",setup(R){const d=p(),t=n(""),a=n(""),m=async()=>{if(t.value&&a.value)try{const s=await k.post(`${N}/users/sign_in`,{email:t.value,password:a.value});if(s.data.status){let e=new Date;e.setTime(e.getTime()+60*60*1*1e3),e=e.toUTCString(),document.cookie=`hexschoolTodo=${s.data.token}expires=`+e+";",l("登入成功","","success","確認"),setTimeout(()=>{d.push(`/todo?name=${s.data.nickname}`)},1e3)}}catch(s){l("登入失敗","帳號密碼驗證錯誤","error","確認"),console.log("Error: ",s)}else l("輸入錯誤","資料不得為空","error","確認")};return(s,e)=>{const u=v("RouterLink");return w(),_("div",T,[o("div",V,[y,o("div",null,[o("form",L,[B,E,i(o("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),required:""},null,512),[[c,t.value]]),I,i(o("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":e[1]||(e[1]=r=>a.value=r),required:""},null,512),[[c,a.value]]),o("button",{class:"formControls_btnSubmit",onClick:f(m,["prevent"])},"登入"),h(u,{class:"formControls_btnLink",to:"/register"},{default:g(()=>[C("註冊帳號")]),_:1})])])])])}}};export{D as default};
