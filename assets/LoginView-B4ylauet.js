import{u as p,r as n,c as _,a as e,w as r,v as c,b as f,d as h,e as g,f as v,o as w,g as x}from"./index-numq_cky.js";import{_ as C,a as b}from"./workImg-CTHQzf_B.js";import{a as k,S as i}from"./sweetalert2.all-D_BT0Pn-.js";const T={id:"loginPage",class:"bg-yellow"},V={class:"conatiner loginPage vhContainer"},y=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:C,alt:""})]),e("img",{class:"d-m-n",src:b,alt:"workImg"})],-1),L={class:"formControls",action:"index.html"},S=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),B=e("label",{class:"formControls_label",for:"email"},"Email",-1),E=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),I="https://todolist-api.hexschool.io",q={__name:"LoginView",setup(N){const d=p(),s=n(""),a=n(""),m=async()=>{s.value&&a.value?await k.post(`${I}/users/sign_in`,{email:s.value,password:a.value}).then(t=>{if(t.data.status){let o=new Date;o.setTime(o.getTime()+60*60*1*1e3),o=o.toUTCString(),document.cookie=`hexschoolTodo=${t.data.token}expires=`+o+";",i.fire({title:"登入成功",icon:"success"}),setTimeout(()=>{d.push(`/todo?name=${t.data.nickname}`)},1e3)}else i.fire({title:"登入失敗",text:"請重新登入",icon:"error"})}).catch(t=>{console.log("Error: ",t)}):i.fire({title:"輸入錯誤",text:"資料不得為空",icon:"error"})};return(t,o)=>{const u=v("RouterLink");return w(),_("div",T,[e("div",V,[y,e("div",null,[e("form",L,[S,B,r(e("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":o[0]||(o[0]=l=>s.value=l),required:""},null,512),[[c,s.value]]),E,r(e("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":o[1]||(o[1]=l=>a.value=l),required:""},null,512),[[c,a.value]]),e("button",{class:"formControls_btnSubmit",onClick:f(m,["prevent"])},"登入"),h(u,{class:"formControls_btnLink",to:"/register"},{default:g(()=>[x("註冊帳號")]),_:1})])])])])}}};export{q as default};
